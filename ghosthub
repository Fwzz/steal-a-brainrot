-- Serviços
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

humanoid.UseJumpPower = true -- Forçar uso do JumpPower

-- God Mode
humanoid:GetPropertyChangedSignal("Health"):Connect(function()
	if humanoid.Health < humanoid.MaxHealth then
		humanoid.Health = humanoid.MaxHealth
	end
end)

-- GUI
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "HackGUI"
screenGui.ResetOnSpawn = false

-- Botão azul pra abrir GUI
local openButton = Instance.new("TextButton", screenGui)
openButton.Text = "O"
openButton.Size = UDim2.new(0, 30, 0, 30)
openButton.Position = UDim2.new(0, 10, 0.5, -15)
openButton.BackgroundColor3 = Color3.fromRGB(0, 100, 255)
openButton.TextColor3 = Color3.new(1, 1, 1)
openButton.TextScaled = true
openButton.BorderSizePixel = 0

-- Frame principal da GUI
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0, 250, 0, 200)
mainFrame.Position = UDim2.new(0.5, -125, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 20, 60)
mainFrame.Visible = false
mainFrame.Active = true
mainFrame.Draggable = true

local stroke = Instance.new("UIStroke", mainFrame)
stroke.Color = Color3.fromRGB(100, 150, 255)
stroke.Thickness = 2

local corner = Instance.new("UICorner", mainFrame)
corner.CornerRadius = UDim.new(0, 12)

-- Suporte a arrastar no celular
local dragging = false
local dragInput, dragStart, startPos

local function update(input)
	local delta = input.Position - dragStart
	mainFrame.Position = UDim2.new(
		startPos.X.Scale,
		startPos.X.Offset + delta.X,
		startPos.Y.Scale,
		startPos.Y.Offset + delta.Y
	)
end

mainFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = mainFrame.Position

		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

mainFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

-- Função de toggle com círculo indicador
local function createToggle(name, positionY, callback)
	local container = Instance.new("Frame", mainFrame)
	container.Size = UDim2.new(1, -20, 0, 30)
	container.Position = UDim2.new(0, 10, 0, positionY)
	container.BackgroundTransparency = 1

	local label = Instance.new("TextLabel", container)
	label.Size = UDim2.new(1, -40, 1, 0)
	label.Position = UDim2.new(0, 0, 0, 0)
	label.BackgroundTransparency = 1
	label.Text = name
	label.TextColor3 = Color3.new(1, 1, 1)
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Font = Enum.Font.SourceSansBold
	label.TextScaled = true

	local circle = Instance.new("TextButton", container)
	circle.Size = UDim2.new(0, 20, 0, 20)
	circle.Position = UDim2.new(1, -30, 0.5, -10)
	circle.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
	circle.Text = ""
	circle.BorderSizePixel = 0

	local uicorner = Instance.new("UICorner", circle)
	uicorner.CornerRadius = UDim.new(1, 0)

	local on = false
	circle.MouseButton1Click:Connect(function()
		on = not on
		circle.BackgroundColor3 = on and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
		callback(on)
	end)
end

-- Jump Boost 300%
local jumpLoop
createToggle("Jump Boost", 10, function(active)
	if active then
		humanoid.JumpPower = 150
		if jumpLoop then jumpLoop:Disconnect() end
		jumpLoop = RunService.Heartbeat:Connect(function()
			humanoid.JumpPower = 150
		end)
	else
		if jumpLoop then jumpLoop:Disconnect() end
		humanoid.JumpPower = 50
	end
end)

-- Anti-Ragdoll
createToggle("Anti-Ragdoll", 50, function(active)
	if active then
		character.ChildAdded:Connect(function(child)
			if child:IsA("BodyVelocity") or child.Name:lower():match("ragdoll") then
				child:Destroy()
			end
		end)
	end
end)

-- ESP
local function createESP()
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character then
			local head = plr.Character:FindFirstChild("Head")
			if head and not head:FindFirstChild("NameTag") then
				local tag = Instance.new("BillboardGui", head)
				tag.Name = "NameTag"
				tag.Size = UDim2.new(0, 100, 0, 20)
				tag.StudsOffset = Vector3.new(0, 2, 0)
				tag.AlwaysOnTop = true

				local text = Instance.new("TextLabel", tag)
				text.Size = UDim2.new(1, 0, 1, 0)
				text.BackgroundTransparency = 1
				text.Text = plr.Name
				text.TextColor3 = Color3.fromRGB(255, 0, 0)
				text.TextScaled = true
			end
		end
	end
end

createToggle("ESP Players", 90, function(active)
	if active then
		createESP()
		task.spawn(function()
			while wait(180) do
				createESP()
			end
		end)
	end
end)

-- Botão de sair rápido
local exitButton = Instance.new("TextButton", screenGui)
exitButton.Size = UDim2.new(0, 100, 0, 30)
exitButton.Position = UDim2.new(0.5, -50, 0, 10)
exitButton.Text = "SAIR RÁPIDO"
exitButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
exitButton.TextColor3 = Color3.new(1, 1, 1)
exitButton.BorderSizePixel = 0
exitButton.MouseButton1Click:Connect(function()
	game:Shutdown()
end)

-- Mostrar/ocultar a GUI
openButton.MouseButton1Click:Connect(function()
	mainFrame.Visible = not mainFrame.Visible
end)
